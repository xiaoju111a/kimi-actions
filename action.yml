name: 'Kimi Code Review'
description: 'AI-powered code review using Kimi (Moonshot AI) - supports /review and /ask commands'
author: 'xiaoju111a'
branding:
  icon: 'star'
  color: 'blue'

inputs:
  kimi_api_key:
    description: 'Kimi API Key from Moonshot AI'
    required: true
  kimi_base_url:
    description: 'Kimi API Base URL (optional, defaults to https://api.moonshot.cn/v1)'
    required: false
    default: 'https://api.moonshot.cn/v1'
  github_token:
    description: 'GitHub Token for PR operations'
    required: true
  language:
    description: 'Response language (en-US, zh-CN)'
    required: false
    default: 'en-US'
  model:
    description: 'Kimi model to use (kimi-k2.5, kimi-k2-thinking, kimi-k2-thinking-turbo)'
    required: false
    default: 'kimi-k2.5'
  review_level:
    description: 'Review strictness (strict, normal, gentle)'
    required: false
    default: 'normal'
  max_files:
    description: 'Maximum number of files to review'
    required: false
    default: '50'
  exclude_patterns:
    description: 'File patterns to exclude (comma-separated)'
    required: false
    default: '*.lock,*.min.js,*.min.css'
  auto_review:
    description: 'Auto review on PR open/sync (default: false, use /review command instead)'
    required: false
    default: 'false'

outputs:
  review_comment:
    description: 'The review comment posted to the PR'

runs:
  using: 'docker'
  image: 'Dockerfile'
